

---
title: "R Notebook"
output:
  html_notebook: default
  pdf_document: default
---
## Project 1: ACS Quality of Life per State, Education and Gender

We want to find a relationship betweeen the Attained Education, State, Gender, and the quality of life of US population.

The main assumption is that quality of life is directly proportional to with Salary [USD/hour] and Commute Time to work [hours].


## Load the libraries and data
Here we load the data from a secure dropbox link. 
```{r, message=F}
library(dplyr)
library(readr)
library(DT)
```

```{r, include=F}
acs14pusa <- read_csv("./data/ss14pusa.csv", guess_max = 10000)
acs14pusb <- read_csv("./data/ss14pusb.csv", guess_max = 10000)


```

```{r}

datatable(head(acs14pusa,50), options = list(scrollX=T, pageLength = 10))
```

## Basic information about original data
```{r,message=F}
dim(acs14pusa)
dim(acs14pusb)
```

## Select relevant columns to reduce memory usage.
```{r,message=F}
relevant.columns <- c("SERIALNO", "ST", "SEX", "AGEP", "SCHL", "FOD1P", "FOD2P", "WKHP", "WAGP", "ESR",
                      "PINCP", "PERNP", "JWMNP")
acs14pusa.cols <- acs14pusa[,colnames(acs14pusa)%in%relevant.columns]
acs14pusb.cols <- acs14pusb[,colnames(acs14pusb)%in%relevant.columns]
```

## Bind part a and b, and get basic information
```{r,message=F}
acs14pus <- rbind(acs14pusa.cols, acs14pusb.cols)
dim(acs14pus)
```

## Add state names and abbreviations
Credist to Arnold Chua Lau (Spring 2016).

```{r, message=F}
ST.anno = read_csv("./data/statenames.csv")
ST.anno = mutate(ST.anno, STabbr=abbr, STname=name)

acs14pus = mutate(acs14pus, STnum = as.numeric(ST))
acs14pus <- left_join(acs14pus, ST.anno, by = c("STnum" = "code"))

select(sample_n(acs14pus,5), starts_with("ST"))
```

## Write result to a csv file. So we do not need to build them again (takes 30 min in a laptop)
```{r,message=F}
write_csv(x = acs14pus, path = "./output/ss14pus_columns.csv" )
```

## Read csv file. If already present, we can skip all steps above.
```{r,message=F}
acs14pus <- read_csv(file = "./output/ss14pus_columns.csv" )
```


## Summary statistics / Boxplots (Jaime)

## For whole population

## For each state

## For each educational attainment



## Choropleth maps of US states (Ying)


